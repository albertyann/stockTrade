# 股票深度分析系统：产品需求文档 (PRD)

## 1. 产品概述

股票深度分析档案系统旨在为个人投资者及金融分析师提供一个集股票数据获取、智能分析、深度研究与个人知识管理于一体的综合性平台。该系统的核心目标在于通过自动化手段，每日定时拉取最新的股票交易信息，并依据用户预设的特定规则对这些交易情况进行智能分析，从而辅助用户高效筛选出具有潜在投资价值的股票。此外，系统将为每一只关注的股票建立一个详尽的数字档案库，该档案库不仅包含标准化的财务报表（资产负债表、利润表、现金流量表）管理功能，还支持用户上传、查阅各类财报文件，记录个人投资笔记与洞察，并整合行业及个股分析报告。最终，本系统致力于成为用户在股票投资决策过程中的核心信息枢纽与智能分析助手，提升研究效率，深化投资认知，并力求在复杂多变的市场环境中为用户创造价值。系统将采用现代化的技术架构，确保数据的准确性、分析的时效性、操作的安全性与体验的流畅性，满足用户从数据获取到深度研究，再到投资决策的全流程需求。

## 2. 目标用户与典型场景

本系统的目标用户群体主要包括具备一定股票市场基础知识，并希望通过系统化研究与深度分析来指导投资决策的个人投资者、以及对特定股票进行长期跟踪研究的金融爱好者或初级分析师。这些用户通常不满足于简单的行情展示，他们渴望获得更全面的数据、更灵活的分析工具以及便捷的个人知识管理功能。

**典型用户画像：**

*   **个人投资者 (李先生)**：李先生是一位有多年经验的个人投资者，他关注多个行业的股票，并倾向于基于基本面分析和技术分析相结合的方式进行投资决策。他每天需要花费大量时间浏览财经网站、查看公司公告、整理财务数据，并记录自己的研究心得。他希望有一个工具能够自动帮他收集这些数据，并根据他设定的标准（例如，PE低于行业平均、ROE连续三年增长、股价突破关键均线等）初步筛选股票，同时能方便地管理他针对不同股票的研究笔记和收集到的分析报告。
*   **金融分析师/研究员 (王女士)**：王女士是一名初级行业研究员，她需要跟踪所负责行业的多家上市公司，定期撰写分析报告。她需要一个平台能够集中存储和管理这些公司的历史财务数据、定期报告（年报、季报），以及她自己的分析笔记和外部的研究报告。她希望系统能提供清晰的财务数据对比功能，并支持她将零散的洞察整合成结构化的知识。

**典型使用场景：**

1.  **每日数据更新与初步筛选**：用户设定每日股市收盘后，系统自动从可靠的数据源（如Alpha Vantage, Finnhub等，详见外部依赖）获取所关注股票池的交易数据（开盘价、最高价、最低价、收盘价、成交量等）。获取完成后，系统自动运行用户预设的分析规则（例如，“连续三日成交量放大且股价上涨”、“市盈率低于15且营收增长率超过10%”）。次日，用户登录系统，在“智能分析看板”中即可看到系统根据规则筛选出的“今日关注股票”列表，以及相关股票的触发规则说明和关键数据摘要。
2.  **深度研究与档案管理**：用户从“今日关注股票”列表中选择一只股票（例如“ABC公司”）进行深入研究。他进入“ABC公司”的专属档案库页面。
    *   在“财报管理中心”，他上传了ABC公司最新发布的年度报告PDF文件，并查看了系统已归档的历史季度报告。
    *   在“三表深度透视”模块，他查看了ABC公司近五年的资产负债表、利润表和现金流量表数据，并利用系统提供的图表工具，直观地比较了公司营收和净利润的年度变化趋势，以及资产负债率的波动情况。
    *   在“我的投资笔记”板块，他记录了对ABC公司新产品市场前景的观察，并链接了一篇相关的行业新闻。他还可以按时间线或标签（如“行业竞争”、“管理层评估”）回顾之前的笔记。
    *   在“分析报告库”中，他查阅了之前收藏的一份券商关于ABC公司的深度研究报告，并上传了一份自己撰写的简要分析。
3.  **规则调整与策略优化**：经过一段时间的使用，用户发现某条筛选规则的命中率不高，或者市场环境发生了变化。他进入“分析规则引擎”页面，修改了这条规则的参数，或者新增了一条结合了技术指标（如MACD金叉）和基本面指标（如预期PEG值小于1）的复合规则。系统将在后续的数据分析中应用这些更新后的规则。

## 3. 功能需求详述

### 3.1 数据获取与同步模块

*   **3.1.1 自动定时数据拉取**：
    *   系统应支持用户配置每日自动拉取股票交易数据的时间点（例如，每个交易日收盘后30分钟）。
    *   拉取的数据项至少应包括：股票代码、开高低收价格、成交量、成交额（视数据源支持情况）。
    *   系统应能处理用户自定义的股票列表（自选股）作为数据拉取范围。
*   **3.1.2 数据源配置与管理**：
    *   系统应支持配置至少一种主流的股票数据API源（如Alpha Vantage [[0](https://www.alphavantage.co)], Finnhub [[1](https://finnhub.io)], Twelve Data [[4](https://twelvedata.com/stocks)] 或 Marketstack [[5](https://marketstack.com)]）。
    *   用户应能输入和管理其API密钥。
    *   系统应能检测API的可用性及配额使用情况，并在配额不足或API不可用时发出提醒。
*   **3.1.3 历史数据初始化**：
    *   对于新加入的股票，系统应能支持从数据源获取一定历史周期（例如，过去一年或自上市以来）的交易数据，以便进行有效的技术分析和趋势判断。
*   **3.1.4 数据清洗与存储**：
    *   系统应对获取到的原始数据进行必要的清洗和格式化处理，确保数据的准确性和一致性。
    *   清洗后的数据应存储在系统的数据库中，并建立高效的索引机制以支持快速查询和分析。
*   **3.1.5 增量更新与错误处理**：
    *   日常数据拉取应采用增量更新策略，避免重复获取已存在数据。
    *   对于数据获取失败的情况（如网络问题、API限制），系统应有重试机制（例如，间隔一段时间后重试若干次），并记录详细的错误日志。对于持续失败的情况，应向用户发出明确通知。
*   **3.1.6 财务数据获取**：
    *   系统应能通过API或其它可靠渠道，定期（如财报发布季）获取并更新公司的基本面财务数据，用于支持“三表深度透视”模块和分析规则引擎中基于基本面指标的分析。

### 3.2 智能分析规则引擎

*   **3.2.1 规则定义与管理**：
    *   用户应能创建、编辑、删除、启用/禁用自定义的分析规则。
    *   每条规则应包含：规则名称、描述、触发条件（一个或多个）、以及规则的优先级（可选，用于规则冲突时）。
    *   规则应支持组合条件，例如使用“且”、“或”逻辑连接多个子条件。
*   **3.2.2 条件类型支持**：
    *   **技术指标条件**：系统应提供常用技术指标作为条件，例如：价格均线（MA）、指数平滑异同移动平均线（MACD）、相对强弱指数（RSI）、布林带（BOLL）、成交量变化率等。用户应能设定指标参数（如MA的周期）和比较条件（如“股价上穿MA20”、“RSI低于30”）。
    *   **基本面指标条件**：系统应支持基于财务数据的条件，例如：市盈率（P/E）、市净率（P/B）、净资产收益率（ROE）、营收增长率（YoY）、净利润增长率（YoY）、股息率等。用户应能设定比较条件（如“P/E < 15”、“ROE > 10%且连续三年增长”）。
    *   **价格与成交量条件**：如“今日涨幅超过5%”、“成交量较昨日均值放大50%”、“股价创N日新高”等。
    *   **（可选）市场情绪/新闻条件**：若数据源支持，可考虑集成基于新闻情感分析的条件。
*   **3.2.3 规则执行与结果输出**：
    *   系统应在数据更新后自动执行所有启用的分析规则。
    *   分析结果应清晰展示，包括触发的股票、触发的规则、以及触发时的关键数据快照。
    *   结果应能按时间、规则、股票等维度进行筛选和排序。
*   **3.2.4 规则回测（可选，高级功能）**：
    *   系统可考虑提供规则回测功能，允许用户使用历史数据测试其规则的有效性，并返回回测报告（如胜率、盈亏比、最大回撤等）。

### 3.3 股票深度档案库

*   **3.3.1 档案库概览**：
    *   每只股票应有独立的档案库入口，档案库首页应展示股票的核心信息摘要，如当前股价、涨跌幅、市值、PE、PB等关键指标，以及最新财报的亮点数据和用户最近的投资笔记摘要。
*   **3.3.2 财报管理中心**：
    *   **财报上传**：用户应能上传本地财报文件（如PDF、Excel格式），并为其添加标签（如年报、季报、业绩预告）和备注。
    *   **财报列表与查看**：系统应以列表形式展示已上传的财报，支持按时间、类型排序，并能在线预览或下载财报文件。
    *   **（可选）财报解析**：系统可考虑集成OCR或PDF解析技术，自动提取财报中的关键财务数据，用于填充“三表深度透视”模块，减轻用户手动输入负担。
*   **3.3.3 三表深度透视**：
    *   **数据展示**：系统应能结构化地展示资产负债表、利润表、现金流量表的历史数据（至少最近3-5年及最新季度）。
    *   **数据可视化**：核心财务指标（如营收、净利润、总资产、净资产、经营活动现金流净额等）应提供图表（如柱状图、折线图）展示，方便用户进行趋势分析。
    *   **数据对比**：用户应能选择不同期间的数据进行对比分析（如同比、环比），或与同行业平均水平（若数据可得）进行对比。
    *   **数据导出**：三表数据应支持导出为Excel或CSV格式，方便用户进行离线分析。
*   **3.3.4 我的投资笔记**：
    *   **笔记创建与编辑**：用户应能针对特定股票创建、编辑、删除投资笔记。笔记内容应支持富文本格式（如加粗、列表、链接）。
    *   **笔记分类与标签**：用户可以为笔记添加自定义标签（如“宏观影响”、“技术分析”、“管理层访谈”、“风险提示”），便于后续检索和管理。
    *   **笔记检索与排序**：系统应支持按关键词、标签、创建时间等条件检索和排序笔记。
    *   **笔记关联**：笔记应能关联到特定的财报文件或分析报告。
*   **3.3.5 分析报告库**：
    *   **报告上传与管理**：用户应能上传本地的研究报告文件（如PDF、Word、PPT），并为其添加标题、来源机构、上传日期、相关标签等信息。
    *   **报告列表与查看**：系统应以列表形式展示已上传的报告，支持按时间、来源、标签排序，并能在线预览或下载报告文件。
    *   **（可选）报告摘要与AI洞察**：系统可考虑集成AI技术，对上传的报告进行自动摘要提取，或提供基于报告内容的初步洞察分析。

### 3.4 系统管理与用户支持

*   **3.4.1 用户账户管理**：
    *   支持用户注册、登录、密码找回功能。
    *   （可选）支持多用户角色与权限管理，若系统定位为个人使用，则此需求可简化。
*   **3.4.2 自选股管理**：
    *   用户应能方便地添加、删除自己关注的股票列表（自选股），此列表将作为数据拉取和分析的主要范围。
*   **3.4.3 系统设置**：
    *   用户应能配置数据源API信息、数据自动更新时间、系统主题等偏好设置。
*   **3.4.4 日志与监控**：
    *   系统应记录关键操作日志和数据同步日志，便于问题排查。
    *   对于系统运行状态（如数据同步状态、API调用配额），应能在管理后台（或向用户）提供必要的监控信息。
*   **3.4.5 帮助与文档**：
    *   系统应提供用户使用手册或帮助文档，解释各功能模块的使用方法。

## 4. 非功能需求

*   **4.1 性能**：
    *   数据拉取和处理应在合理时间内完成，例如，一个包含500只股票的完整数据更新流程应在1小时内完成（具体时间视数据源API限制和网络状况而定）。
    *   用户界面响应时间应小于2秒，数据查询和图表加载应在3秒内呈现。
    *   系统应能支持至少1000只股票的日常数据管理和分析。
*   **4.2 可靠性与可用性**：
    *   系统应保证7x24小时运行（除计划内维护时间外），年可用性目标不低于99.5%。
    *   数据拉取失败率应低于1%，并在失败后能自动恢复或及时告警。
    *   用户数据应有定期备份机制，防止数据丢失。
*   **4.3 数据准确性**：
    *   从外部API获取的数据应进行校验，确保与数据源一致。
    *   用户手动输入的财务数据（若未实现自动解析）应有清晰的编辑界面和校验逻辑。
*   **4.4 安全性**：
    *   用户密码等敏感信息应加密存储。
    *   用户上传的文件和分析笔记等个人数据应受到保护，未经授权不得访问。
    *   API密钥等配置信息应安全存储，防止泄露。
    *   系统应具备基本的防SQL注入、XSS等常见Web攻击能力。
*   **4.5 可扩展性**：
    *   系统架构应设计为可水平扩展，以应对未来用户量和数据量的增长。
    *   应易于集成新的数据源或分析算法模块。
*   **4.6 易用性**：
    *   用户界面应直观、简洁、符合用户操作习惯。
    *   关键功能流程应尽可能简化，减少用户操作步骤。
    *   提供清晰的操作指引和错误提示。

## 5. 外部依赖与假设

*   **5.1 股票数据API**：
    *   系统依赖第三方股票数据API获取实时/历史交易数据及部分财务数据。可选API包括但不限于：
        *   Alpha Vantage [[0](https://www.alphavantage.co)]: 提供免费和付费的股票、外汇、加密货币数据及技术和基本面指标。
        *   Finnhub [[1](https://finnhub.io)]: 提供实时市场数据、全球公司基本面数据、经济数据等，有免费套餐。
        *   Twelve Data [[4](https://twelvedata.com/stocks)]: 提供全球股票、外汇、指数等实时和历史数据，有免费层。
        *   Marketstack [[5](https://marketstack.com)]: 提供实时和历史市场数据，支持全球交易所，有免费计划。
    *   **假设**：所选API能够提供稳定、准确的数据，并具有合理的调用频率和配额限制。系统设计需考虑API可能存在的延迟、限流或服务中断情况。
*   **5.2 财务报告来源**：
    *   标准化财务报表（三表）数据初期可依赖API提供，或由用户手动输入/上传。深度财报文件（如PDF年报）主要由用户上传。
    *   **假设**：用户能够获取并上传相关的财报文件。若未来实现自动财报抓取，则需依赖特定网站或数据提供商。
*   **5.3 系统运行环境**：
    *   **假设**：用户拥有稳定的互联网连接以访问系统及数据。系统服务器部署在可靠的云平台或本地服务器，具备必要的运行和维护能力。
*   **5.4 用户技能**：
    *   **假设**：用户具备基本的计算机操作能力和对股票市场的基础认知。

## 6. 未来展望与潜在扩展

*   **6.1 AI增强分析**：集成更高级的人工智能和机器学习算法，用于市场趋势预测、个股风险评估、智能投顾建议等。
*   **6.2 社区与协作功能**：在确保数据安全和隐私的前提下，引入用户间的分享、讨论功能，形成投资研究社区。
*   **6.3 移动端应用**：开发配套的移动应用（iOS/Android），方便用户随时查看股票信息、管理笔记和接收分析提醒。
*   **6.4 更多数据源集成**：接入宏观经济数据、行业数据、新闻舆情数据、社交媒体数据等，提供更全面的分析视角。
*   **6.5 高级图表与分析工具**：提供更丰富的技术分析图表工具（如自定义指标、画线分析）和量化分析回测平台。
*   **6.6 API开放平台**：若系统发展成熟，可考虑开放部分API接口，供第三方开发者构建应用。

---

# 股票深度分析档案系统：主要页面设计

本节将详细阐述系统核心页面的布局、主要功能区域和关键交互元素。设计将遵循直观性、易用性和信息层次清晰的原则，旨在提升用户的研究效率和操作体验。

## 6.1 仪表板 (Dashboard)

**页面目标**：作为用户登录系统的首页，仪表板旨在提供一个全局的投资概览，快速展示关键信息，并引导用户进入各功能模块。

**主要功能区域**：

1.  **顶部导航栏**：
    *   包含系统Logo、主导航菜单（仪表板、数据同步、分析规则、我的自选股、系统设置）。
    *   用户信息及退出登录按钮。
2.  **关键指标概览区**：
    *   以卡片形式展示用户自选股池的整体情况，例如：今日涨跌家数、平均涨跌幅、总市值变化等。
    *   展示最近一次数据同步的状态和时间。
3.  **今日关注股票列表**：
    *   **标题**：“今日智能关注 (基于您的分析规则)”。
    *   **内容**：以表格形式列出当日触发了用户预设分析规则的股票。
        *   列包括：股票代码、股票名称、当前价格/涨跌幅、触发的规则名称（可链接至规则详情）、关键触发指标摘要。
        *   每行股票数据可点击，进入该股票的深度档案库页面。
    *   **操作**：“查看全部”链接，导向更完整的筛选结果页面。
4.  **最近投资笔记**：
    *   **标题**：“我的最新笔记”。
    *   **内容**：列出用户最近编辑或创建的5-10条投资笔记摘要，包含笔记标题、关联股票、创建/修改时间。
    *   每条笔记可点击进入该股票的笔记模块查看全文。
5.  **系统通知/提醒区**：
    *   显示系统重要公告、数据同步失败提醒、API配额不足警告等。

**布局草图 (文字描述)**：

```
+----------------------------------------------------------+
|  [Logo]  仪表板 数据同步 分析规则 我的自选股 系统设置 [用户] |
+----------------------------------------------------------+
|                                                          |
|  关键指标概览区 (3-4个卡片横向排列)                      |
|  [自选股总数] [今日涨跌家数] [最后同步: YYYY-MM-DD HH:MM] |
|                                                          |
+----------------------------------------------------------+
|                                                          |
|  今日智能关注 (基于您的分析规则)                         |
|  +----------------------------------------------------+  |
|  | 股票代码 | 股票名称 | 现价/涨跌幅 | 触发规则 | 摘要 |  |
|  +----------------------------------------------------+  |
|  | 000001  | 平安银行 | 12.50/+1.2% | 规则A    | ... |  |
|  +----------------------------------------------------+  |
|  | 000002  | 万 科A  | 25.80/-0.5% | 规则B    | ... |  |
|  +----------------------------------------------------+  |
|  [查看全部]                                            |
|                                                          |
+----------------------------------------------------------+
|                                                          |
|  我的最新笔记                        系统通知/提醒        |
|  +-----------------------------+    +-----------------+  |
|  | 笔记1 (关于股票X) [时间]    |    | [提醒内容1]     |  |
|  +-----------------------------+    +-----------------+  |
|  | 笔记2 (关于股票Y) [时间]    |    | [提醒内容2]     |  |
|  +-----------------------------+    +-----------------+  |
|                                                          |
+----------------------------------------------------------+
```

## 6.2 数据同步与配置页面 (Data Sync & Configuration)

**页面目标**：允许用户配置数据源、管理自选股列表、手动触发数据同步，并查看同步日志。

**主要功能区域**：

1.  **页面标题**：数据同步与配置
2.  **数据源配置区**：
    *   **标题**：“API数据源设置”。
    *   **内容**：
        *   选择数据源提供商（下拉菜单，如Alpha Vantage, Finnhub等）。
        *   输入API Key（密码输入框）。
        *   “测试连接”按钮。
        *   “保存设置”按钮。
        *   显示当前API Key状态（如已配置、有效、剩余配额等）。
3.  **自动同步设置区**：
    *   **标题**：“自动同步计划”。
    *   **内容**：
        *   开启/关闭自动同步开关。
        *   设置每日同步时间（时间选择器，例如15:30）。
        *   设置同步频率（例如，每个交易日）。
        *   “保存计划”按钮。
4.  **自选股管理区**：
    *   **标题**：“我的自选股”。
    *   **内容**：
        *   输入框（支持单只股票代码输入或批量导入）。
        *   “添加”按钮。
        *   以表格或列表形式展示当前自选股（股票代码、股票名称、添加日期）。
        *   每只股票旁边有“删除”按钮。
        *   “清空列表”按钮（带确认提示）。
5.  **手动同步与日志区**：
    *   **标题**：“手动同步与操作日志”。
    *   **内容**：
        *   “立即同步”按钮（点击后开始同步，并显示进度）。
        *   “停止同步”按钮（同步过程中显示）。
        *   同步日志文本框/区域，实时显示同步过程中的信息、警告和错误（如“开始同步股票000001...”，“成功获取000001数据...”，“API调用失败，将在5分钟后重试...”）。
        *   “清空日志”按钮。

**布局草图 (文字描述)**：

```
+----------------------------------------------------------+
|  数据同步与配置                                           |
+----------------------------------------------------------+
|                                                          |
|  API数据源设置                           自动同步计划    |
|  +--------------------------------+    +--------------+  |
|  | 数据源: [Alpha Vantage v]      |    | [开启] 每天  |  |
|  | API Key: [************]        |    | 时间: [15:30] |  |
|  | [测试连接] [保存设置]          |    | [保存计划]   |  |
|  +--------------------------------+    +--------------+  |
|                                                          |
+----------------------------------------------------------+
|                                                          |
|  我的自选股                                               |
|  +----------------------------------------------------+  |
|  | 输入股票代码: [      ] [添加]                      |  |
|  +----------------------------------------------------+  |
|  | 股票代码 | 股票名称 | 添加日期      | 操作         |  |
|  +----------------------------------------------------+  |
|  | 000001  | 平安银行 | 2023-10-27   | [删除]       |  |
|  +----------------------------------------------------+  |
|  | ...                                                  |  |
|  +----------------------------------------------------+  |
|  [清空列表]                                            |
|                                                          |
+----------------------------------------------------------+
|                                                          |
|  手动同步与操作日志                                       |
|  [立即同步] [停止同步]                                   |
|  +----------------------------------------------------+  |
|  | [日志显示区域，滚动显示最新日志]                     |  |
|  +----------------------------------------------------+  |
|  [清空日志]                                            |
|                                                          |
+----------------------------------------------------------+
```

## 6.3 分析规则引擎页面 (Analysis Rule Engine)

**页面目标**：允许用户创建、编辑、删除和管理用于筛选股票的智能分析规则。

**主要功能区域**：

1.  **页面标题**：分析规则引擎
2.  **规则列表区**：
    *   **标题**：“我的分析规则”。
    *   **内容**：
        *   以表格形式展示所有已创建的规则。
        *   列包括：规则名称、规则描述、状态（启用/禁用）、最后修改时间、操作（编辑、删除、启用/禁用切换）。
        *   “创建新规则”按钮。
3.  **规则创建/编辑表单区** (可位于页面右侧或弹窗)：
    *   **标题**：“创建新规则” / “编辑规则: [规则名称]”。
    *   **内容**：
        *   规则名称 (文本输入框)。
        *   规则描述 (文本区域)。
        *   **条件构建器**：
            *   支持添加多个条件组（Group），组内条件为“且”(AND)关系，组间关系可为“且”(AND)或“或”(OR)。
            *   每个条件包括：
                *   选择指标类型（下拉菜单：技术指标、基本面指标、价格/成交量）。
                *   选择具体指标（如指标类型为“技术指标”时，可选择MA, MACD, RSI等）。
                *   选择参数（如MA周期，若适用）。
                *   选择比较运算符（下拉菜单：大于、小于、等于、大于等于、小于等于、上穿、下穿等）。
                *   输入比较值（数字或百分比）。
            *   每个条件旁边有“删除”按钮。
            *   “添加条件”按钮（在当前组内添加）。
            *   “添加条件组”按钮。
        *   “保存规则” / “更新规则”按钮。
        *   “取消”按钮。
4.  **规则执行历史/结果区 (可选，或链接至独立页面)**：
    *   **标题**：“最近执行结果”。
    *   **内容**：简要显示最近几次规则执行的情况，如执行时间、触发的股票数量等。可链接到详细的分析结果页面。

**布局草图 (文字描述)**：

```
+----------------------------------------------------------+
|  分析规则引擎                                            |
+----------------------------------------------------------+
|                                                          |
|  我的分析规则                           [创建新规则]     |
|  +----------------------------------------------------+  |
|  | 规则名称 | 描述 | 状态 | 最后修改 | 操作           |  |
|  +----------------------------------------------------+  |
|  | 规则A    | ...  | 启用 | ...      | [编辑][禁用][删除]|  |
|  +----------------------------------------------------+  |
|  | 规则B    | ...  | 禁用 | ...      | [编辑][启用][删除]|  |
|  +----------------------------------------------------+  |
|                                                          |
+----------------------------------------------------------+
|                                                          |
|  +----------------------------------------------------+  |
|  | 规则创建/编辑表单 (当选中创建或编辑时显示)          |  |
|  | 规则名称: [                     ]                  |  |
|  | 规则描述: [                     ]                  |  |
|  |                                                    |  |
|  | 条件组 1 (AND)                                      |  |
|  |   [指标类型v] [具体指标v] [参数] [运算符v] [值] [删除] |  |
|  |   [指标类型v] [具体指标v] [参数] [运算符v] [值] [删除] |  |
|  |   [添加条件]                                        |  |
|  | [添加条件组 (OR)]                                   |  |
|  |                                                    |  |
|  | 条件组 2 (OR)                                       |  |
|  |   [指标类型v] [具体指标v] [参数] [运算符v] [值] [删除] |  |
|  |   [添加条件]                                        |  |
|  |                                                    |  |
|  | [保存规则] [取消]                                   |  |
|  +----------------------------------------------------+  |
|                                                          |
+----------------------------------------------------------+
```

## 6.4 股票深度档案库页面 (Stock Profile Archive)

**页面目标**：集中展示单只股票的所有相关信息，包括实时行情、财务数据、用户笔记、分析报告等，是用户进行深度研究的主要场所。

**主要功能区域**：

1.  **页面头部**：
    *   **股票名称与代码**：例如“平安银行 (000001)”。
    *   **实时行情信息**：当前价格、涨跌额、涨跌幅（颜色区分红绿）、成交量、市值等关键数据。
    *   **（可选）加入/移出自选股按钮**。
2.  **导航标签页 (Tabs)**：
    *   概览 (Overview)
    *   财报管理 (Financial Reports)
    *   三表透视 (Financial Statements)
    *   投资笔记 (Investment Notes)
    *   分析报告 (Research Reports)
3.  **标签页内容区**：
    *   **概览 (Overview)**：
        *   **核心财务指标卡片**：展示最新的PE、PB、ROE、营收增长率、净利润增长率等关键指标，并可提供与行业平均或历史数据的对比。
        *   **近期股价走势图**：展示近期（如3个月、6个月、1年）的股价K线图和成交量图。
        *   **最新财报摘要**：列出最近一期财报的核心财务数据（营收、净利润、每股收益等）及同比变化。
        *   **最新笔记/报告预览**：显示该股票最新的2-3条投资笔记摘要或分析报告标题。
    *   **财报管理 (Financial Reports)**：
        *   **上传财报**：“选择文件”按钮，支持PDF、Excel等格式，并可添加报告类型（年报、中报、季报、业绩预告等）和备注。
        *   **财报列表**：以表格形式展示已上传的财报，包括文件名、上传日期、报告类型、文件大小、操作（预览、下载、删除）。
        *   **（可选）财报搜索/筛选**：按报告类型、年份等筛选财报。
    *   **三表透视 (Financial Statements)**：
        *   **子标签页**：资产负债表、利润表、现金流量表。
        *   **数据表格**：清晰展示选定报表的历史数据（如年度、季度）。
        *   **图表可视化**：对关键项目（如总资产、营业收入、净利润、经营活动现金流等）提供趋势图。
        *   **期间选择器**：允许用户选择要查看的年度或季度范围。
        *   **数据对比功能**：如同比、环比计算，或自定义期间对比。
        *   **数据导出按钮**：“导出为Excel”。
    *   **投资笔记 (Investment Notes)**：
        *   **新建笔记**：“写笔记”按钮，点击后弹出富文本编辑器，可输入标题、内容、添加标签。
        *   **笔记列表**：按时间倒序展示所有笔记，每条笔记显示标题、摘要、创建/修改时间、关联标签。
        *   **笔记操作**：每条笔记可进行“编辑”、“删除”操作。
        *   **笔记筛选/搜索**：可按标签关键词、时间范围筛选笔记。
    *   **分析报告 (Research Reports)**：
        *   **上传报告**：“选择文件”按钮，支持PDF、Word、PPT等格式，并可添加报告标题、来源机构、上传日期、相关标签。
        *   **报告列表**：以表格或卡片形式展示已上传的报告，包括报告标题、来源机构、上传日期、标签、操作（预览、下载、删除）。
        *   **报告筛选/搜索**：按来源、标签、关键词等筛选报告。

**布局草图 (文字描述)**：

```
+----------------------------------------------------------+
|  平安银行 (000001)   [加入自选股]                        |
|  当前价: 12.50 (+0.15 / +1.21%) 成交量: 1.2M 市值: 2300亿 |
+----------------------------------------------------------+
| [概览] [财报管理] [三表透视] [投资笔记] [分析报告]        |
+----------------------------------------------------------+
|                                                          |
|  (概览标签页内容)                                         |
|  +----------------------+  +----------------------------+ |
|  | 核心财务指标卡片      |  | 近期股价走势图 (K线+成交量)| |
|  | PE: 5.2  PB: 0.8      |  |                            | |
|  | ROE: 12.5%            |  |                            | |
|  | 营收增长: 8.2%        |  |                            | |
|  +----------------------+  +----------------------------+ |
|                                                          |
|  最新财报摘要: ...                                       |
|                                                          |
|  最新笔记: ...  最新报告: ...                             |
|                                                          |
+----------------------------------------------------------+
|                                                          |
|  (财报管理标签页内容)                                     |
|  [选择文件上传] [报告类型v] [备注] [上传]                |
|  +----------------------------------------------------+  |
|  | 文件名     | 上传日期 | 类型 | 大小 | 操作         |  |
|  +----------------------------------------------------+  |
|  | 2023年报.pdf|2023-04-10| 年报 | 15MB |[预览][下载][删除]|  |
|  +----------------------------------------------------+  |
|                                                          |
+----------------------------------------------------------+
|                                                          |
|  (三表透视标签页内容)                                     |
|  [资产负债表] [利润表] [现金流量表]  [期间选择器] [导出Excel] |
|  +----------------------------------------------------+  |
|  | 项目 (资产负债表) | 2023-12-31 | 2022-12-31 | 同比变化|  |
|  +----------------------------------------------------+  |
|  | 货币资金           | ...        | ...        | ...    |  |
|  +----------------------------------------------------+  |
|  | ...                                                      |  |
|  +----------------------------------------------------+  |
|  | [关键项目趋势图, 如总资产、负债变化]                  |  |
|  +----------------------------------------------------+  |
|                                                          |
+----------------------------------------------------------+
|                                                          |
|  (投资笔记标签页内容)                                     |
|  [写笔记]                                                |
|  +----------------------------------------------------+  |
|  | 笔记标题1 [标签1,标签2] [2023-10-27] [编辑][删除]    |  |
|  | 笔记内容摘要...                                       |  |
|  +----------------------------------------------------+  |
|  | 笔记标题2 [标签3] [2023-10-25] [编辑][删除]          |  |
|  | 笔记内容摘要...                                       |  |
|  +----------------------------------------------------+  |
|  [按标签筛选: [标签1] [标签2] ...]                       |
|                                                          |
+----------------------------------------------------------+
|                                                          |
|  (分析报告标签页内容)                                     |
|  [选择文件上传] [标题] [来源] [标签] [上传]               |
|  +----------------------------------------------------+  |
|  | 报告标题     | 来源机构 | 上传日期 | 标签 | 操作     |  |
|  +----------------------------------------------------+  |
|  | ABC行业深度 | XX证券   | 2023-09-15| 行业| [预览][下载][删除]|  |
|  +----------------------------------------------------+  |
|                                                          |
+----------------------------------------------------------+
```

## 6.5 分析结果页面 (Analysis Results)

**页面目标**：详细展示根据分析规则引擎筛选出的股票结果，并提供进一步的操作。

**主要功能区域**：

1.  **页面标题**：智能分析结果
2.  **筛选与排序区**：
    *   **标题**：“筛选条件”。
    *   **内容**：
        *   选择分析规则（多选或单选，默认为所有启用的规则）。
        *   选择日期范围（查看特定日期的分析结果）。
        *   “应用筛选”按钮。
        *   结果排序选项（如按触发时间、按股票代码、按触发规则数量等）。
3.  **分析结果列表**：
    *   **标题**：“筛选结果 (共 [N] 只股票)”。
    *   **内容**：
        *   以表格形式展示触发的股票。
        *   列包括：股票代码、股票名称、触发日期、当前价格/涨跌幅、触发的规则名称（可多个，用逗号分隔，并可链接至规则详情）。
        *   每行股票数据可点击，进入该股票的深度档案库页面。
        *   （可选）“加入自选股”快捷操作。
4.  **结果操作**：
    *   **导出结果**：“导出为Excel/CSV”按钮，将当前筛选结果导出。
    *   **（可选）批量操作**：如批量将结果中的股票加入某个自定义分组。

**布局草图 (文字描述)**：

```
+----------------------------------------------------------+
|  智能分析结果                                            |
+----------------------------------------------------------+
|                                                          |
|  筛选条件                                                |
|  规则: [规则A v] [规则B v] [全部]  日期: [    v] [应用筛选] |
|  排序: [触发时间 v] [股票代码 v]                          |
|                                                          |
+----------------------------------------------------------+
|                                                          |
|  筛选结果 (共 15 只股票)    [导出为Excel]                |
|  +----------------------------------------------------+  |
|  | 股票代码 | 股票名称 | 触发日期 | 现价/涨跌幅 | 触发规则 |  |
|  +----------------------------------------------------+  |
|  | 000001  | 平安银行 | 2023-10-27| 12.50/+1.2% | 规则A, 规则C |  |
|  +----------------------------------------------------+  |
|  | 000002  | 万 科A  | 2023-10-27| 25.80/-0.5% | 规则B    |  |
|  +----------------------------------------------------+  |
|  | ...                                                  |  |
|  +----------------------------------------------------+  |
|                                                          |
+----------------------------------------------------------+
```
